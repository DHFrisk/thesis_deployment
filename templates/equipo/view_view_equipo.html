{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>Equipo</title>
{% endblock title %}

{% block content %}
<div class="">
	<div class="card" style="">
        <div class="card-header">
            <h3 class="card-title">Listado equipos</h3>
						<div class="col-md-3 offset-9">
							<form action="{% url 'write_general_report' %}">
								{% csrf_token %}
								<label for="btn-general-report">Reporte general</label>
								<button id="btn-general-report" type="submit" class="btn btn-success form-control">
									<i class="fas fa-file-excel"></i>
								</button>
							</form>
						</div>
        </div>
        <div class="card-body" style="">
            <table class="table table-striped table-bordered" id="table-users" style="width: 100%;">
                <thead class="table-dark">
                    <tr>
                        <td>#</td>
                        <td>Código</td>
                        <td>Nombre</td>
                        <td>Código de cuenta</td>
                        <td>Marca</td>
                        <td>Modelo</td>
                        <td>Unidad</td>
                        <td>Responsable</td>
												<td>Hoja responsabilidad</td>
                    </tr>
                </thead>
                <tbody>
                    {% for equipo in equipo %}
                    <tr>
                        <td>{{equipo.id}}</td>
                        <td>{{equipo.code}}</td>
                        <td>{{equipo.name}}</td>
                        <td>{{equipo.accounting.name}}</td>
                        <td>{{equipo.brand}}</td>
                        <td>{{equipo.model}}</td>
                        <td>{{equipo.fk_unidad.name}}</td>
                        <td>{{equipo.fk_assigned_user.get_full_name}}</td>
												<td>
													<form action="{% url 'write_responsibility_sheet' equipment_id=equipo.id %}" method="post">
														{% csrf_token %}
															<button type="submit" class="btn btn-success form-control"><i class="fas fa-file-excel"></i></button>
													</form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
<script>
    $(document).ready(function(){
        $("#table-users").DataTable({
            language:{
                "decimal":        "",
                "emptyTable":     "No hay datos disponibles en la tabla",
                "info":           "Mostrar _START_ a _END_ de _TOTAL_ entradas",
                "infoEmpty":      "Mostrando 0 a 0 de 0 entradas",
                "infoFiltered":   "(filtered from _MAX_ total entries)",
                "infoPostFix":    "",
                "thousands":      ",",
                "lengthMenu":     "Mostrar _MENU_ entradas",
                "loadingRecords": "Cargando...",
                "processing":     "Procesando...",
                "search":         "Buscar:",
                "zeroRecords":    "No se encontraron coincidencias",
                "paginate": {
                    "first":      "Primero",
                    "last":       "Último",
                    "next":       "Siguiente",
                    "previous":   "Anterior"
                },
                "aria": {
                    "sortAscending":  ": Activar para ordenar columnas ascendentes",
                    "sortDescending": ": Activar para ordenar columnas descendientes"
                }
            }
        });
    });
</script>
{% endblock content %}
